
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/data/rule-examples.json</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">src/data</a> rule-examples.json</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/0</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/0</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/0</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/0</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">{
  "R1": {
    "id": "R1",
    "readme": "# R1: Rate Limit &amp; Retry Rule Examples\n\n## Overview\n\n**Rule:** R1 ‚Äì Rate Limit &amp; Retry  \n**Severity:** `must` (blocks PR)  \n**Purpose:** Ensure outbound API/HTTP nodes have retry + backoff so transient 429s/timeouts do not drop or duplicate work.\n\n**FlowLint check (how R1 detects violations):**\n- Finds API-like nodes (HTTP Request, Slack, Google, Ads, generic HTTP) on the happy-path\n- Looks for `options.retry` on those nodes\n- If missing/empty ‚Üí R1 violation (must-fix)\n- Suggested default: 3 attempts, exponential backoff, 500ms base with jitter\n\n**Symptoms when missing retries:** flaky runs, partial syncs, lost messages, duplicated replays when upstream retries the webhook.\n\n---\n\n## üîß How to Fix R1 in n8n (2 steps)\n\n1. Open the API node (e.g., **HTTP Request**, **Slack**, **Google Sheets**)\n2. Set **Options ‚Üí Retry on Fail** (or add `options.retry` in JSON):\n   - `count: 3`\n   - `strategy: exponential`\n   - `baseMs: 500`\n   - `maxDelay: 5000`\n   - `jitter: true`\n\nOptional but recommended:\n- Cap concurrency at 5 for bulk imports\n- Add circuit-breaker logic (IF node) after repeated failures\n\n---\n\n## Example 1: ‚ùå BAD ‚Äì No Retry/Backoff\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger&lt;br/&gt;(new lead)\"] --&gt;|raw payload| B[\"üåê Create Lead (API)&lt;br/&gt;‚ùå no retry/backoff\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n```\n\n**What happens:** One transient 429/timeout fails the run; webhook retries may re-send and create duplicates downstream.\n\n**FlowLint output:**\n```\n‚ùå R1 (must): Missing retry/backoff for node \"Create Lead (API)\".\nSuggestion: retry {count:3, strategy:'exponential', baseMs:500}\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Exponential Retry with Jitter\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger&lt;br/&gt;(new lead)\"] --&gt;|raw payload| B[\"üåê Create Lead (API)&lt;br/&gt;‚úÖ retry x3, exp backoff, jitter\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n```\n\n**Why this passes:**\n- `options.retry` present with 3 attempts, exponential backoff, jitter\n- Handles 429/5xx bursts without failing the workflow\n- Safe to combine with concurrency cap (max 5) for heavy imports\n\n**FlowLint output:**\n```\n‚úÖ PASS\nRetry/backoff configured for API node.\n```\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  rate_limit_retry:\n    enabled: true\n    max_concurrency: 5\n    default_retry:\n      count: 3\n      strategy: exponential\n      base_ms: 500\n```\n\n- **max_concurrency**: advisory cap for bulk jobs (helps avoid burst limits)\n- **default_retry**: used in suggestions if a node is missing retries\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`, hit a test endpoint that returns HTTP 429 ‚Üí FlowLint flags R1.  \n2) Import `good-example.json`, repeat ‚Üí FlowLint passes (workflow retries up to 3 times with jitter).  \n3) For CI: include these files in a PR; the FlowLint Check Run should show one must-fix annotation for the bad example and none for the good one.\n\n---\n\n## Related Rules\n\n- **R2** Error Handling: forbid `continueOnFail` on critical paths\n- **R3** Idempotency: prevent duplicates when webhooks retry\n- **R12** Unhandled Error Path: ensure errors are routed\n\n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook Trigger\",\n      \"parameters\": {\n        \"path\": \"new-lead\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Create Lead (API) with Retry\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"retry\": {\n            \"count\": 3,\n            \"strategy\": \"exponential\",\n            \"baseMs\": 500,\n            \"maxDelay\": 5000,\n            \"jitter\": true\n          },\n          \"timeout\": 30000\n        }\n      },\n      \"position\": [360, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Lead (API) with Retry\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: HTTP request with exponential retry/backoff (3 attempts, 500ms base, jitter) so FlowLint R1 passes.\",\n    \"retry_policy\": {\n      \"count\": 3,\n      \"strategy\": \"exponential\",\n      \"baseMs\": 500,\n      \"maxDelay\": 5000,\n      \"jitter\": true\n    },\n    \"notes\": [\n      \"FlowLint sees options.retry and does not flag R1\",\n      \"Handles transient 429/5xx responses without failing the run\",\n      \"Safe to combine with max concurrency 5 for bulk imports\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook Trigger\",\n      \"parameters\": {\n        \"path\": \"new-lead\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Create Lead (API)\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {}\n      },\n      \"position\": [360, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Lead (API)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ùå BAD: HTTP Request without retry/backoff. A single 429/timeout fails the run and FlowLint R1 triggers.\",\n    \"notes\": [\n      \"API node lacks options.retry\",\n      \"Susceptible to rate limits and transient network failures\"\n    ]\n  }\n}\n"
  },
  "R2": {
    "id": "R2",
    "readme": "# R2: Error Handling (No `continueOnFail`)\n\n## Overview\n\n**Rule:** R2 ‚Äì Error Handling  \n**Severity:** `must` (blocks PR)  \n**Purpose:** Forbid silent failure via `continueOnFail=true`. Fail fast and handle errors explicitly on a dedicated branch.\n\n**FlowLint check (how R2 detects violations):**\n- Scans nodes for `continueOnFail: true`\n- If found ‚Üí R2 violation (must-fix)\n- Encourages explicit error paths (separate branch) instead of swallowing errors\n\n**Why it matters:** `continueOnFail` hides 4xx/5xxs and data issues, leading to partial syncs, corrupt state, or duplicates when upstream retries.\n\n---\n\n## üîß How to Fix R2 in n8n\n\n1. Open the offending node and **disable `Continue On Fail`**.  \n2. Add an **error branch** to handle failures:\n   - Log/alert (Slack, Email)\n   - Dead-letter (Queue/DB)\n   - Stop or mark the run as failed\n\nOptional patterns:\n- Add retry (R1) before the error branch\n- Include correlation/idempotency IDs (R3) in logs\n\n---\n\n## Example 1: ‚ùå BAD ‚Äì `continueOnFail=true`\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger\"] --&gt; B[\"üåê Create Lead (API)&lt;br/&gt;‚ùå continueOnFail=true\"]\n    B --&gt; C[\"üìù Write to Sheet&lt;br/&gt;(keeps running even on 500s)\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n    style C fill:#fff3cd\n```\n\n**What happens:** API 500s are ignored; downstream nodes run with incomplete/invalid data. FlowLint flags R2.\n\n**FlowLint output:**\n```\n‚ùå R2 (must): continueOnFail=true on node \"Create Lead (API)\".\nAdd an error branch instead of swallowing failures.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Error Branch with Alert\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger\"] --&gt; B[\"üåê Create Lead (API)&lt;br/&gt;‚úÖ continueOnFail=false\"]\n    B --&gt;|success| C[\"üìù Write to Sheet\"]\n    B --&gt;|error| D[\"üîî Slack Alert&lt;br/&gt;(DLQ/ops)\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n    style D fill:#d4edda\n```\n\n**Why this passes:**\n- `continueOnFail` disabled (default false)\n- Error branch captures failures and notifies ops\n- Downstream nodes only run on success\n\n**FlowLint output:**\n```\n‚úÖ PASS\nNo nodes with continueOnFail=true; error branch present.\n```\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  error_handling:\n    enabled: true\n    forbid_continue_on_fail: true\n```\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`, run against an endpoint that returns 500 ‚Üí FlowLint flags R2.  \n2) Import `good-example.json` and trigger the error path ‚Üí FlowLint passes; Slack branch runs only on error.  \n3) CI: include both files in a PR; the bad example should produce one must-fix annotation on the API node.\n\n---\n\n## Related Rules\n\n- **R1** Rate Limit/Retry: add retry before the error branch  \n- **R3** Idempotency: include request IDs in alerts/logs  \n- **R12** Unhandled Error Path: ensure error edges exist on critical nodes  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook Trigger\",\n      \"parameters\": {\n        \"path\": \"new-lead\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Create Lead (API)\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"retry\": {\n            \"count\": 3,\n            \"strategy\": \"exponential\",\n            \"baseMs\": 500,\n            \"jitter\": true\n          }\n        }\n      },\n      \"position\": [360, 80]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"name\": \"Write to Sheet\",\n      \"parameters\": {\n        \"spreadsheetId\": \"abc123xyz\",\n        \"range\": \"Sheet1!A1\",\n        \"options\": {}\n      },\n      \"position\": [600, 40]\n    },\n    {\n      \"id\": \"4\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"name\": \"Slack Alert\",\n      \"parameters\": {\n        \"channel\": \"#ops-alerts\",\n        \"text\": \"Lead creation failed for {{ $json.email || 'unknown' }}\",\n        \"additionalFields\": {}\n      },\n      \"position\": [600, 160]\n    }\n  ],\n  \"connections\": {\n    \"Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Lead (API)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Lead (API)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Write to Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ],\n      \"error\": [\n        [\n          {\n            \"node\": \"Slack Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: continueOnFail disabled; error branch sends Slack alert while success path continues normally.\",\n    \"notes\": [\n      \"FlowLint R2 passes because continueOnFail is false/absent\",\n      \"Error branch makes failures visible\",\n      \"Retry configured (R1 synergy) before error routing\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook Trigger\",\n      \"parameters\": {\n        \"path\": \"new-lead\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Create Lead (API)\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"retry\": {\n            \"count\": 0\n          }\n        },\n        \"continueOnFail\": true\n      },\n      \"position\": [360, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"name\": \"Write to Sheet\",\n      \"parameters\": {\n        \"spreadsheetId\": \"abc123xyz\",\n        \"range\": \"Sheet1!A1\",\n        \"options\": {}\n      },\n      \"position\": [600, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Lead (API)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Lead (API)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Write to Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ùå BAD: continueOnFail=true swallows API errors and downstream nodes keep running.\",\n    \"notes\": [\n      \"FlowLint R2 flags continueOnFail=true\",\n      \"No error branch; failures are silent\"\n    ]\n  }\n}\n"
  },
  "R3": {
    "id": "R3",
    "readme": "# R3: Idempotency Rule Examples\n\n## Overview\n\n**Rule:** R3 - Idempotency  \n**Severity:** `must` (blocks PR)  \n**Purpose:** Ensure mutation paths (database writes, API updates) have an idempotency guard to prevent duplicate processing when webhooks are retried.\n\n### TL;DR (FlowLint signal)\n- Has webhook/trigger? ‚úÖ\n- Has mutation node? ‚úÖ\n- Any upstream node params contain one of the key candidates in **field names or values** (including expressions)?\n  - Yes ‚Üí pass\n  - No ‚Üí fail\n\n**How the search works:**\n- Searches upstream node parameters recursively\n- Looks for candidate keys in field **names** (`eventId`) and **values** (including `{{ ... }}` expressions)\n- Case-insensitive matching\n\n**What this means:** FlowLint only checks that an idempotency key (e.g., `eventId/messageId`) exists upstream and flows to the mutation. Preventing duplicates is done by the sink (DB UNIQUE + UPSERT/`ON CONFLICT`, idempotency header at the API, or cache-based dedup).\n\n---\n\n## What is Idempotency?\n\nIdempotency means that **running the same operation multiple times produces the same result as running it once**. This is critical for webhooks because:\n\n1. Network failures can cause webhook retries\n2. Without idempotency, duplicate records or state changes occur\n3. Example: User subscribed twice, charge applied twice, message stored twice\n\n---\n\n## The Rule Logic\n\n1) Webhook/trigger present?  \n2) Mutation node present (write/insert/update/delete/API POST, etc.)?  \n3) Any upstream node has a param name/value containing a configured key? (`eventId`, `messageId` by default)  \n‚Üí Yes: pass. No: fail.\n\n**Default key field candidates:** `eventId`, `messageId` (Configurable via `.flowlint.yml`)\n\n---\n\n## üîß How to Fix R3 Violation (Step-by-Step)\n\n**Your workflow triggered R3?** Here's exactly what to do:\n\n### Step 1: Add a Set Node\n\n1. In n8n editor, place a **Set node** between your webhook and mutation node\n2. Name it something clear: `\"Capture eventId\"` or `\"Capture messageId\"`\n3. Wire it: `Webhook ‚Üí Set ‚Üí Mutation`\n\n### Step 2: Configure the Set Node\n\nIn the Set node parameters, add your idempotency key:\n\n**Simple approach (Google Sheets):**\n```\nSet node ‚Üí Values (String)\n- Name: eventId\n- Value: ={{ $json.event_id }}\n```\n\n**Robust approach (Database):**\n```\nSet node ‚Üí Values (String)\n- Name: messageId\n- Value: ={{ $json.message_id }}\n```\n\n### Step 3: Use It in Your Mutation\n\n- **Google Sheets:** Add an `eventId` column; deduplicate manually\n- **Database:** Add `ON CONFLICT (messageId) DO NOTHING` to your INSERT query\n\n### That's it! üéâ\n\nFlowLint will now detect the `eventId` or `messageId` in your Set node's parameters upstream of the mutation node.\n\n---\n\n## How to Choose: Simple vs. Robust?\n\n| Need | Choose | Example File |\n|------|--------|--------------|\n| Google Sheets, quick setup | **Simple** (eventId) | `good-example-with-eventId.json` |\n| Database, production-ready | **Robust** (messageId + DB constraint) | `good-example-with-messageId.json` |\n\n---\n\n## Example 1: ‚ùå BAD - No Idempotency Guard\n\n**Reminder:** FlowLint only checks that an idempotency key exists upstream of the mutation. The \"good\" examples pass because the Set node carries `eventId`/`messageId`; the enforcement patterns shown (unique key, `ON CONFLICT`, etc.) are best practices but not evaluated by R3.\n\n### File: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger&lt;br/&gt;(incoming-data)\"] --&gt;|no idempotency guard| B[\"üìù Write to Sheet&lt;br/&gt;(Google Sheets)\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n```\n\n**What's wrong:**\n- Webhook receives data directly\n- Immediately writes to Google Sheets\n- If webhook fires twice (retry), duplicate rows are created\n- No mechanism to prevent duplicates\n\n**Scenario:**\n```json\n// Webhook fires with same data (retry):\n{ \"name\": \"John Doe\", \"email\": \"john@example.com\" }\n\n// Result after 2 webhook fires:\nSheet Row 1: John Doe | john@example.com\nSheet Row 2: John Doe | john@example.com  ‚Üê Duplicate!\n```\n\n**FlowLint Output:**\n```\n‚ùå R3: MUST\n\"The mutation path ending at \"Write to Sheet\" appears to be missing\nan idempotency guard.\n\nEnsure one of the upstream nodes or the mutation node itself uses an\nidempotency key, such as one of: eventId, messageId\"\n```\n\n---\n\n## Example 2: ‚úÖ GOOD (Simple) - Using `eventId` with Google Sheets\n\n### File: `good-example-with-eventId.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger&lt;br/&gt;(incoming-data)\"] --&gt;|raw payload| B[\"‚öôÔ∏è Capture eventId&lt;br/&gt;(Set node)&lt;br/&gt;üìå name: eventId\"]\n    B --&gt;|eventId in workflow| C[\"üìù Write to Sheet&lt;br/&gt;(Google Sheets)&lt;br/&gt;üìå Dedup on eventId\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n```\n\n**The Simple Approach - Best for Google Sheets:**\n\n1. **Webhook node** receives raw payload (no modification):\n   ```\n   Payload: { \"event_id\": \"evt_12345\", \"name\": \"John\", ... }\n   ```\n\n2. **Set node** (`\"Capture eventId\"`) extracts the ID:\n   ```json\n   {\n     \"parameters\": {\n       \"mode\": \"manual\",\n       \"keepOnlySet\": true,\n       \"values\": {\n         \"string\": [\n           { \"name\": \"eventId\", \"value\": \"={{ $json.event_id || $json.eventId }}\" }\n         ]\n       },\n       \"options\": {}\n    }\n   }\n   ```\n   ‚Üí FlowLint detects `\"eventId\"` in Set node parameters ‚úÖ\n\n3. **Google Sheets** stores the data with `eventId` column:\n   - First webhook fire: Row 1 with eventId = `evt_12345`\n   - Second webhook fire (retry): Row 2 would have same eventId = `evt_12345`\n   - You manually deduplicate: data validation, Apps Script, or manual cleanup\n\n**FlowLint Output:**\n```\n‚úÖ PASS\nIdempotency key 'eventId' detected upstream of mutation node.\n```\nFlowLint passes here solely because the Set node carries `eventId` on the path to the mutation. It does not check how you deduplicate in Sheets.\n\n**Deployment Notes:**\n- In Google Sheets, add a column \"Event ID\" as unique identifier.\n- Use data validation or an Apps Script to prevent duplicate eventIds (less robust than a database).\n\n---\n\n## Example 3: ‚úÖ GOOD (Robust) - Using `messageId` with Database\n\n### File: `good-example-with-messageId.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Message Webhook&lt;br/&gt;(messages)\"] --&gt;|raw payload| B[\"‚öôÔ∏è Capture messageId&lt;br/&gt;(Set node)&lt;br/&gt;üìå name: messageId\"]\n    B --&gt;|messageId in workflow| C[\"üóÑÔ∏è Insert Message&lt;br/&gt;(Postgres)&lt;br/&gt;ON CONFLICT DO NOTHING\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n```\n\n**The Robust Approach - Best for Databases:**\n\n1. **Webhook node** receives raw payload:\n   ```\n   Payload: { \"message_id\": \"msg_789\", \"content\": \"Hello\", ... }\n   ```\n\n2. **Set node** (`\"Capture messageId\"`) extracts the ID:\n   ```json\n   {\n     \"parameters\": {\n       \"mode\": \"manual\",\n       \"keepOnlySet\": true,\n       \"values\": {\n         \"string\": [\n           { \"name\": \"messageId\", \"value\": \"={{ $json.message_id || $json.messageId }}\" }\n         ]\n       },\n       \"options\": {}\n    }\n   }\n   ```\n   ‚Üí FlowLint detects `\"messageId\"` in Set node parameters ‚úÖ\n\n3. **Database query** uses `ON CONFLICT` for guaranteed idempotency:\n   ```sql\n   INSERT INTO messages (message_id, content, created_at)\n   VALUES ($1, $2, NOW())\n   ON CONFLICT (message_id) DO NOTHING\n   ```\n\n4. **Database setup** (one-time):\n   ```sql\n   CREATE UNIQUE INDEX idx_messages_message_id ON messages(message_id);\n   ```\n\n5. **How it works:**\n   - First webhook fire: INSERT succeeds, row created\n   - Second webhook fire (retry): INSERT fails on unique constraint, `ON CONFLICT DO NOTHING` silently ignores it\n   - Result: Only one row, guaranteed idempotency ‚úÖ\n\n**FlowLint Output:**\n```\n‚úÖ PASS\nIdempotency key 'messageId' detected upstream of mutation node.\n```\nFlowLint passes here because the Set node carries `messageId` on the path to the mutation. R3 does not verify the unique index or `ON CONFLICT` clause (those are for real idempotency, outside the check).\n\n**Why this is more robust than Example 2:**\n- ‚úÖ Enforcement at database level (guaranteed, no manual dedup)\n- ‚úÖ No application logic needed\n- ‚úÖ Works across multiple applications/services\n- ‚úÖ Production-ready pattern\n\n---\n\n## Key Differences\n\n| Aspect | Example 1&lt;br/&gt;(Bad) | Example 2&lt;br/&gt;(Simple) | Example 3&lt;br/&gt;(Robust) |\n|--------|------------|---------------|---------------|\n| **Idempotency Guard** | None | `eventId` param | `messageId` param |\n| **Enforcement** | Manual/None | App logic needed | Database constraint |\n| **Duplicate on Retry** | ‚ùå YES | ‚ö†Ô∏è Possible | ‚úÖ NO |\n| **Reliability** | Low | Medium | High |\n| **Target System** | Google Sheets | Google Sheets | Database |\n\n---\n\n## How to Fix the Bad Example\n\n**Refer to the \"üîß How to Fix R3 Violation\" section near the top of this document for step-by-step instructions.**\n\nIn summary:\n1. Add a **Set node** between webhook and mutation\n2. Extract your idempotency key (`eventId` or `messageId`)\n3. Use it to prevent duplicates downstream\n\nChoose based on your target system:\n- **Google Sheets?** ‚Üí Example 2 (Simple, eventId)\n- **Database?** ‚Üí Example 3 (Robust, messageId + DB constraint)\n\n---\n\n## Configuration\n\n### Default Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  idempotency:\n    enabled: true\n    key_field_candidates:\n      - eventId\n      - messageId\n```\n\n### Custom Configuration\n\nTo add your own idempotency key names:\n\n```yaml\nrules:\n  idempotency:\n    enabled: true\n    key_field_candidates:\n      - eventId\n      - messageId\n      - transactionId\n      - correlationId\n      - requestId\n```\n\n---\n\n## Common Idempotency Keys\n\n| Key Name | Source | Use Case |\n|----------|--------|----------|\n| `eventId` | Webhook payload | Event-driven workflows |\n| `messageId` | Message broker | Queue-based workflows |\n| `transactionId` | Payment API | Financial transactions |\n| `correlationId` | Request header | Distributed tracing |\n| `requestId` | HTTP request | API integration |\n| `orderId` | E-commerce webhook | Order processing |\n| `webhookId` + timestamp | GitHub/Slack | Multi-source webhooks |\n\n---\n\n## Best Practices\n\n1. **Always extract unique IDs** from incoming data before mutations\n2. **Use database constraints** (unique indexes) when possible\n3. **Test idempotency** by simulating webhook retries\n4. **Log idempotency keys** for debugging duplicate issues\n5. **Consider using `ON CONFLICT` or `UPSERT`** for SQL databases\n6. **Set expiration** on in-memory deduplication (cache invalidation)\n\n---\n\n## Related Rules\n\n- **R1** (rate_limit_retry): Ensure API calls have retry logic\n- **R2** (error_handling): Proper error handling before mutations\n- **R12** (unhandled_error_path): Ensure errors are handled\n\n---\n\n## References\n\n- [n8n Webhooks Documentation](https://docs.n8n.io/)\n- [Idempotent Operations (AWS)](https://docs.aws.amazon.com/AWSEC2/latest/APIReference/Run_Instance_Idempotency.html)\n- [Webhook Best Practices](https://webhook.cool/guides/best-practices)\n",
    "good": "",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook Trigger\",\n      \"parameters\": {\n        \"path\": \"incoming-data\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"name\": \"Write to Sheet\",\n      \"parameters\": {\n        \"spreadsheetId\": \"abc123xyz\",\n        \"range\": \"Sheet1!A1\",\n        \"options\": {}\n      },\n      \"position\": [400, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Write to Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ùå BAD: Webhook ‚Üí Google Sheets without idempotency guard. If webhook fires twice, duplicates will be created.\"\n  }\n}\n"
  },
  "R4": {
    "id": "R4",
    "readme": "# R4: Secrets (No Hardcoded Tokens)\n\n## Overview\n\n**Rule:** R4 ‚Äì Secrets  \n**Severity:** `must` (blocks PR)  \n**Purpose:** Prevent hardcoded API keys/tokens in workflows. Use credentials or env variables instead.\n\n**FlowLint check (how R4 detects violations):**\n- Scans node params for strings matching common secret patterns (API keys, Bearer tokens, `x-api-key`, `token=...`)\n- Flags literals in headers, query params, Set nodes, or inline expressions without `$credentials` / `$env`\n- Denylist patterns come from `.flowlint.yml` (regex)\n\n**Risks:** Secrets leak in git history, PRs, logs, and build artifacts; rotation becomes hard.\n\n---\n\n## üîß How to Fix R4 in n8n\n\n1. Move the secret into **Credentials** (preferred) or **Environment variables**.  \n2. Reference it in the node:\n   - Credentials: pick a saved credential (API key, OAuth, etc.)\n   - Env: `={{ $env.API_KEY }}` or `={{ $vars.apiKey }}`\n3. Remove the literal from node parameters.\n\n---\n\n## Example 1: ‚ùå BAD ‚Äì Hardcoded API Key\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger\"] --&gt; B[\"üåê HTTP Request&lt;br/&gt;‚ùå header: x-api-key=sk_live_123\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n```\n\n**FlowLint output:**\n```\n‚ùå R4 (must): Possible secret literal detected (x-api-key).\nMove the value to credentials or env.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Uses Credentials/Env\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger\"] --&gt; B[\"üåê HTTP Request&lt;br/&gt;‚úÖ header uses $credentials.apiKey\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n```\n\n**Why this passes:**\n- Header value is sourced from credentials, not a literal\n- No denylist patterns in raw text\n- Safe for PRs and history\n\n**FlowLint output:**\n```\n‚úÖ PASS\nNo hardcoded secrets found; credentials/env used.\n```\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  secrets:\n    enabled: true\n    denylist_regex:\n      - \"(?i)api[_-]?key\"\n      - \"Bearer \"\n      - \"x-api-key\"\n```\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint flags R4 for the literal key.  \n2) Import `good-example.json`; FlowLint passes.  \n3) CI: Include both in a PR; expect one must-fix annotation for the bad header literal.\n\n---\n\n## Related Rules\n\n- **R1** Rate Limit/Retry: protect API calls  \n- **R2** Error Handling: avoid silent failures with invalid secrets  \n- **R9** Config Literals: move config strings to expressions/credentials  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook Trigger\",\n      \"parameters\": {\n        \"path\": \"secrets-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Call Partner API (Secure)\",\n      \"parameters\": {\n        \"url\": \"https://api.partner.example.com/v1/resource\",\n        \"method\": \"GET\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"genericAuthTypeOptions\": {\n          \"headerName\": \"x-api-key\"\n        },\n        \"options\": {},\n        \"headerParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"User-Agent\",\n              \"value\": \"FlowLintExample/1.0\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"cred-http-header-api-key\",\n          \"name\": \"Partner API Key\"\n        }\n      },\n      \"position\": [360, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call Partner API (Secure)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: API key pulled from credentials; no literal secrets in workflow JSON.\",\n    \"notes\": [\n      \"FlowLint R4 passes because the sensitive header value is sourced from credentials\",\n      \"Safe to commit; key lives outside git\",\n      \"Can also use $env.VAR for environments without credentials\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook Trigger\",\n      \"parameters\": {\n        \"path\": \"secrets-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Call Partner API\",\n      \"parameters\": {\n        \"url\": \"https://api.partner.example.com/v1/resource\",\n        \"method\": \"GET\",\n        \"options\": {},\n        \"headerParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"x-api-key\",\n              \"value\": \"sk_live_1234567890abcdef\"\n            }\n          ]\n        }\n      },\n      \"position\": [360, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call Partner API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ùå BAD: Hardcoded API key in header (x-api-key). FlowLint R4 flags secret literals.\",\n    \"notes\": [\n      \"Move key to credentials or env variable\",\n      \"Avoid committing keys to git/PRs\"\n    ]\n  }\n}\n"
  },
  "R5": {
    "id": "R5",
    "readme": "# R5: Dead Ends (Orphaned Nodes)\n\n## Overview\n\n**Rule:** R5 ‚Äì Dead Ends  \n**Severity:** `nit`  \n**Purpose:** Find nodes with no outgoing connections (orphaned / unreachable), which usually indicate incomplete or forgotten logic.\n\n**FlowLint check (how R5 detects violations):**\n- Scans for nodes without outgoing edges\n- Excludes explicit terminal nodes you configure (e.g., ‚ÄúFinish‚Äù, ‚ÄúStop‚Äù)\n- Marks them as dead ends for review\n\n**Why it matters:** Unused nodes confuse reviewers, drift from requirements, and may hide intended alerts or writes that never run.\n\n---\n\n## üîß How to Fix R5 in n8n\n\n1. **Wire the node** to where its output should go, or  \n2. **Remove** the unused node if obsolete, or  \n3. **Document** intentional terminals (rename to ‚ÄúEnd‚Äù/‚ÄúStop‚Äù and keep severity low).\n\n---\n\n## Example 1: ‚ùå BAD ‚Äì Orphaned Slack Node\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üóÑÔ∏è Save Lead\"]\n    C[\"üîî Slack Alert&lt;br/&gt;‚ùå no outgoing edge\"]\n\n    style A fill:#fff3cd\n    style B fill:#fff3cd\n    style C fill:#f8d7da\n```\n\n**FlowLint output:**\n```\n‚ùå R5 (nit): Node \"Slack Alert\" has no outgoing connections (dead end).\nRemove it or wire it into the flow.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Alert Wired to Main Path\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üóÑÔ∏è Save Lead\"]\n    B --&gt; C[\"üîî Slack Alert&lt;br/&gt;‚úÖ branches to Ops\"]\n    C --&gt; D[\"‚úÖ Done\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n    style D fill:#d4edda\n```\n\n**Why this passes:**\n- Every node has a deliberate outgoing path\n- Alert is connected and returns to the main flow\n- No stray/unreachable nodes\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  dead_ends:\n    enabled: true\n    allow_names:\n      - \"End\"\n      - \"Stop\"\n```\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint flags the orphaned Slack node.  \n2) Import `good-example.json`; FlowLint passes (no dead ends).  \n3) CI: Include both in a PR; expect one nit-level annotation on the bad example.\n\n---\n\n## Related Rules\n\n- **R7** Alert/Log Enforcement: ensure alerts/logs exist on error branches  \n- **R8** Unused Data: detects unused outputs even when wired  \n- **R10** Naming Convention: use descriptive names for intentional terminal nodes  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"dead-end-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"name\": \"Save Lead\",\n      \"parameters\": {\n        \"query\": \"INSERT INTO leads(name,email) VALUES($1,$2)\",\n        \"options\": {}\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"name\": \"Slack Alert\",\n      \"parameters\": {\n        \"channel\": \"#ops-alerts\",\n        \"text\": \"Lead saved: {{ $json.email }}\"\n      },\n      \"position\": [540, 100]\n    },\n    {\n      \"id\": \"4\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"name\": \"Done\",\n      \"parameters\": {},\n      \"position\": [760, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save Lead\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save Lead\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Slack Alert\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Done\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: All nodes are connected; no dead ends. Slack alert is part of the main path.\",\n    \"notes\": [\n      \"FlowLint R5 passes: each node has an outgoing edge\",\n      \"Intentional terminal node named Done clarifies end of flow\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"dead-end-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"name\": \"Save Lead\",\n      \"parameters\": {\n        \"query\": \"INSERT INTO leads(name,email) VALUES($1,$2)\",\n        \"options\": {}\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"name\": \"Slack Alert (Orphaned)\",\n      \"parameters\": {\n        \"channel\": \"#ops-alerts\",\n        \"text\": \"Lead saved\"\n      },\n      \"position\": [320, 220]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save Lead\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ùå BAD: Slack Alert node is disconnected (no outgoing edge to or from flow). FlowLint R5 flags dead ends.\",\n    \"notes\": [\n      \"Orphaned node likely forgotten during refactor\",\n      \"Wire it or remove it to keep flow clear\"\n    ]\n  }\n}\n"
  },
  "R6": {
    "id": "R6",
    "readme": "# R6: Long Running / Infinite Loops\n\n## Overview\n\n**Rule:** R6 ‚Äì Long Running  \n**Severity:** `should`  \n**Purpose:** Warn when loops or waits can stall runs (too many iterations, unbounded loops, huge timeouts).\n\n**FlowLint check (how R6 detects warnings):**\n- Flags cycles with no guard (loop edge without max iterations)\n- Notes large iteration limits (default &gt; 1000) or waits/timeouts above configured threshold\n- Highlights long `Wait` nodes that block workers\n\n**Why it matters:** Long or infinite runs block webhook workers, exhaust concurrency, and delay retries. They also hide errors while the run is stuck.\n\n---\n\n## üîß How to Fix R6 in n8n\n\n1. Add a **loop guard** (max iterations) or **batch size**.  \n2. Cap **Wait/timeout** durations (e.g., &lt;= 5 minutes by default).  \n3. Send long-running work to a queue/background system if needed.  \n4. Add alerts when loops exceed expected duration.\n\n---\n\n## Example 1: ‚ö†Ô∏è BAD ‚Äì Unbounded Loop\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üì¶ Split In Batches&lt;br/&gt;‚ö†Ô∏è loop without max\"]\n    B --&gt; C[\"‚öôÔ∏è Process Batch\"]\n    C --&gt;|loop| B\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n    style C fill:#fbbf24\n```\n\n**FlowLint output:**\n```\n‚ö†Ô∏è R6 (should): Loop detected without max iterations (Split In Batches).\nAdd a batch limit or stop condition.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Guarded Loop with Timeout\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üì¶ Split In Batches&lt;br/&gt;‚úÖ max 500 items\"]\n    B --&gt; C[\"‚öôÔ∏è Process Batch\"]\n    C --&gt;|loop if more| B\n    C --&gt; D[\"‚è±Ô∏è Wait 5s (backoff)\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n    style D fill:#d4edda\n```\n\n**Why this passes:**\n- Loop has a max (500 items) and stops cleanly\n- Short wait/backoff between batches to avoid timeouts and rate limits\n- Within default thresholds (`max_iterations: 1000`, `timeout_ms: 300000`)\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  long_running:\n    enabled: true\n    max_iterations: 1000\n    timeout_ms: 300000   # 5 minutes\n```\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint warns about unbounded loop.  \n2) Import `good-example.json`; FlowLint passes (bounded loop + short waits).  \n3) CI: include both in a PR; expect one `should` annotation for the bad example.\n\n---\n\n## Related Rules\n\n- **R1** Rate Limit/Retry: combine with backoff in loops  \n- **R2** Error Handling: ensure loops fail fast on repeated errors  \n- **R12** Unhandled Error Path: add error edges inside loops  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"long-running-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"name\": \"Split In Batches (Guarded)\",\n      \"parameters\": {\n        \"batchSize\": 50,\n        \"options\": {\n          \"maxItems\": 500\n        }\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"name\": \"Process Batch\",\n      \"parameters\": {\n        \"functionCode\": \"return items;\"\n      },\n      \"position\": [520, 100]\n    },\n    {\n      \"id\": \"4\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"name\": \"Wait (5s backoff)\",\n      \"parameters\": {\n        \"interval\": 5,\n        \"unit\": \"seconds\"\n      },\n      \"position\": [520, 220]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split In Batches (Guarded)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split In Batches (Guarded)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Process Batch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Process Batch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split In Batches (Guarded)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait (5s backoff)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: Loop is bounded (max 500 items) with short wait backoff. FlowLint R6 passes.\",\n    \"notes\": [\n      \"Guarded loop prevents infinite runs\",\n      \"Wait/backoff reduces load and avoids timeouts\",\n      \"Within default thresholds (max_iterations 1000, timeout_ms 300000)\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"long-running-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"name\": \"Split In Batches\",\n      \"parameters\": {\n        \"batchSize\": 1\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"name\": \"Process Batch\",\n      \"parameters\": {\n        \"functionCode\": \"return items;\"\n      },\n      \"position\": [520, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split In Batches\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split In Batches\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Process Batch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Process Batch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split In Batches\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ö†Ô∏è BAD: Unbounded loop between Split In Batches and Process Batch; no max iterations or stop condition. FlowLint R6 warns.\",\n    \"notes\": [\n      \"Cycle without guard can run indefinitely\",\n      \"Add max iterations or break condition\"\n    ]\n  }\n}\n"
  },
  "R7": {
    "id": "R7",
    "readme": "# R7: Alert / Log Enforcement on Error Paths\n\n## Overview\n\n**Rule:** R7 ‚Äì Alert/Log Enforcement  \n**Severity:** `should`  \n**Purpose:** Ensure error branches emit a log/alert before rejoining or ending, so failures are observable.\n\n**FlowLint check (how R7 detects warnings):**\n- Looks at error edges from API/mutation nodes\n- Flags error branches that **do not contain** a log/alert node (Slack, Email, Log, Webhook, Queue) or a **Stop and Error** node before merging back\n- Encourages visibility instead of silent retries or merges\n\n**Why it matters:** Without alerts/logs, errors disappear and data loss goes unnoticed.\n\n---\n\n## üîß How to Fix R7 in n8n\n\n1. Add a **Slack/Email/Log** node on the error branch OR use a **Stop and Error** node.\n2. Include context (request ID, payload) and severity channel.  \n3. Optionally send to DLQ/queue for reprocessing.\n\n---\n\n## Example 1: ‚ö†Ô∏è BAD ‚Äì Error Branch with No Alert\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê Push to CRM\"]\n    B --&gt;|success| C[\"üìù Save to Sheet\"]\n    B --&gt;|error| D[\"‚ö†Ô∏è Swallow Error&lt;br/&gt;‚ùå no alert\"]\n\n    style A fill:#fff3cd\n    style B fill:#fff3cd\n    style C fill:#fff3cd\n    style D fill:#f8d7da\n```\n\n**FlowLint output:**\n```\n‚ö†Ô∏è R7 (should): Error branch from \"Push to CRM\" has no alert/log before exiting.\nAdd Slack/Email/Log or DLQ step.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Error Alert + DLQ\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê Push to CRM\"]\n    B --&gt;|success| C[\"üìù Save to Sheet\"]\n    B --&gt;|error| D[\"üîî Slack Alert&lt;br/&gt;logs context\"]\n    D --&gt; E[\"üì¶ DLQ (Queue)\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n    style D fill:#d4edda\n    style E fill:#d4edda\n```\n\n**Why this passes:**\n- Error branch includes Slack alert with payload context\n- Failure payload is sent to a DLQ/queue for later replay\n- Increases observability; reviewers see intent\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  alert_log_enforcement:\n    enabled: true\n```\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint warns about missing alert on error branch.  \n2) Import `good-example.json`; FlowLint passes.  \n3) CI: include both in a PR; expect one `should` annotation on the bad example.\n\n---\n\n## Related Rules\n\n- **R2** Error Handling: forbid `continueOnFail`  \n- **R12** Unhandled Error Path: ensure an error branch exists first  \n- **R1** Rate Limit/Retry: pair retries with alerts for repeated failures  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"alert-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Push to CRM\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"retry\": {\n            \"count\": 3,\n            \"strategy\": \"exponential\",\n            \"baseMs\": 500\n          }\n        }\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"name\": \"Save to Sheet\",\n      \"parameters\": {\n        \"spreadsheetId\": \"abc123xyz\",\n        \"range\": \"Sheet1!A1\",\n        \"options\": {}\n      },\n      \"position\": [540, 80]\n    },\n    {\n      \"id\": \"4\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"name\": \"Slack Alert\",\n      \"parameters\": {\n        \"channel\": \"#ops-alerts\",\n        \"text\": \":rotating_light: CRM push failed for {{ $json.email || 'unknown' }}\",\n        \"additionalFields\": {}\n      },\n      \"position\": [540, 200]\n    },\n    {\n      \"id\": \"5\",\n      \"type\": \"n8n-nodes-base.queue\",\n      \"name\": \"DLQ (Queue)\",\n      \"parameters\": {\n        \"queue\": \"crm_failures\"\n      },\n      \"position\": [760, 200]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Push to CRM\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Push to CRM\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save to Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ],\n      \"error\": [\n        [\n          {\n            \"node\": \"Slack Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Slack Alert\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"DLQ (Queue)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: Error branch sends Slack alert and enqueues payload to DLQ. FlowLint R7 passes.\",\n    \"notes\": [\n      \"Alert carries context (email) for debugging\",\n      \"DLQ preserves failed payloads\",\n      \"Retry on main node pairs with observable error handling\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"alert-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Push to CRM\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {}\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"name\": \"Save to Sheet\",\n      \"parameters\": {\n        \"spreadsheetId\": \"abc123xyz\",\n        \"range\": \"Sheet1!A1\",\n        \"options\": {}\n      },\n      \"position\": [540, 80]\n    },\n    {\n      \"id\": \"4\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"name\": \"Swallow Error\",\n      \"parameters\": {},\n      \"position\": [540, 180]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Push to CRM\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Push to CRM\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save to Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ],\n      \"error\": [\n        [\n          {\n            \"node\": \"Swallow Error\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ö†Ô∏è BAD: Error branch swallows failures with no alert/log. FlowLint R7 warns.\",\n    \"notes\": [\n      \"No visibility into CRM failures\",\n      \"Add Slack/Email/Log or DLQ node on the error branch\"\n    ]\n  }\n}\n"
  },
  "R8": {
    "id": "R8",
    "readme": "# R8: Unused Data\n\n## Overview\n\n**Rule:** R8 ‚Äì Unused Data  \n**Severity:** `nit`  \n**Purpose:** Detect nodes whose outputs are never consumed, often indicating wasted work or missing wiring.\n\n**FlowLint check (how R8 detects warnings):**\n- Finds nodes with outgoing edges that never reach a consumer\n- Flags transformations whose outputs are unused downstream\n- Goal: reduce unnecessary processing and highlight likely wiring mistakes\n\n**Why it matters:** Unused nodes cost time, API calls, and create confusion about intended flow.\n\n---\n\n## üîß How to Fix R8 in n8n\n\n1. Wire the node‚Äôs output to the intended consumer.  \n2. If obsolete, remove the node.  \n3. If intentional, add a brief note or rename to clarify its purpose (e.g., ‚ÄúDebug Only‚Äù).\n\n---\n\n## Example 1: ‚ö†Ô∏è BAD ‚Äì Enrichment Not Used\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üß† Enrich (Clearbit)&lt;br/&gt;‚ö†Ô∏è output unused\"]\n    A --&gt; C[\"üìù Save to Sheet\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n    style C fill:#fff3cd\n```\n\n**FlowLint output:**\n```\n‚ö†Ô∏è R8 (nit): Node \"Enrich (Clearbit)\" output is never consumed.\nRemove or wire it to the consumer.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Enrichment Feeds Email\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üß† Enrich (Clearbit)\"]\n    B --&gt; C[\"üìß Send Email&lt;br/&gt;uses enrichment\"]\n    B --&gt; D[\"üìù Save to Sheet\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n    style D fill:#d4edda\n```\n\n**Why this passes:**\n- Enrichment output is consumed by downstream email + storage\n- No wasted API calls\n- Clear intent for reviewers\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  unused_data:\n    enabled: true\n```\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint warns about unused enrichment node.  \n2) Import `good-example.json`; FlowLint passes.  \n3) CI: include both in a PR; expect one `nit` annotation on the bad example.\n\n---\n\n## Related Rules\n\n- **R5** Dead Ends: detects disconnected nodes  \n- **R10** Naming Convention: name debug/intentional nodes clearly  \n- **R1/R2**: combine with retries and error paths for real consumers  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"unused-data-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 120]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Enrich (Clearbit)\",\n      \"parameters\": {\n        \"url\": \"https://person.clearbit.com/v2/people/find\",\n        \"method\": \"GET\",\n        \"options\": {}\n      },\n      \"position\": [320, 120]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.emailSend\",\n      \"name\": \"Send Email\",\n      \"parameters\": {\n        \"fromEmail\": \"ops@example.com\",\n        \"toEmail\": \"sales@example.com\",\n        \"subject\": \"New lead from {{ $json.email }}\",\n        \"text\": \"Company: {{ $json.company || $json.enriched.company }}, Role: {{ $json.role || $json.enriched.role }}\"\n      },\n      \"position\": [540, 60]\n    },\n    {\n      \"id\": \"4\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"name\": \"Save to Sheet\",\n      \"parameters\": {\n        \"spreadsheetId\": \"abc123xyz\",\n        \"range\": \"Sheet1!A1\",\n        \"options\": {}\n      },\n      \"position\": [540, 180]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Enrich (Clearbit)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Enrich (Clearbit)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Save to Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: Enrichment output is consumed by email and storage; no unused data. FlowLint R8 passes.\",\n    \"notes\": [\n      \"Downstream consumers use enrichment fields\",\n      \"No wasted API calls\",\n      \"Clear reviewer intent\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"unused-data-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 120]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Enrich (Clearbit)\",\n      \"parameters\": {\n        \"url\": \"https://person.clearbit.com/v2/people/find\",\n        \"method\": \"GET\",\n        \"options\": {}\n      },\n      \"position\": [320, 60]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"name\": \"Save to Sheet\",\n      \"parameters\": {\n        \"spreadsheetId\": \"abc123xyz\",\n        \"range\": \"Sheet1!A1\",\n        \"options\": {}\n      },\n      \"position\": [320, 200]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Enrich (Clearbit)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Save to Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ö†Ô∏è BAD: Enrichment call is made but its output is never consumed by downstream nodes. FlowLint R8 warns.\",\n    \"notes\": [\n      \"Two branches from Webhook; Save to Sheet does not receive enrichment data\",\n      \"Remove or wire enrichment to a consumer (email/log/storage)\"\n    ]\n  }\n}\n"
  },
  "R9": {
    "id": "R9",
    "readme": "# R9: Config Literals (Environment-Specific Strings)\n\n## Overview\n\n**Rule:** R9 ‚Äì Config Literals  \n**Severity:** `should`  \n**Purpose:** Prevent hardcoded environment URLs/names. Use expressions/credentials so workflows move safely between dev/stage/prod.\n\n**FlowLint check (how R9 detects warnings):**\n- Flags literal URLs with environment cues (`dev.`, `staging.`, `prod.`) or hardcoded env names (`production`, `staging`)\n- Looks at headers/query/body for inline config strings instead of `$env` / `$vars` / credentials\n- Encourages parameterization for portability\n\n**Why it matters:** Hardcoded envs cause accidental prod hits or broken deployments when moving workflows.\n\n---\n\n## üîß How to Fix R9 in n8n\n\n1. Move base URLs and env labels to **Environment variables** or **Credentials**.  \n2. Reference them via expressions:\n   - `={{ $env.API_BASE_URL }}`\n   - `={{ $vars.envName }}` or credentials parameters\n3. Avoid committing environment-specific literals.\n\n---\n\n## Example 1: ‚ö†Ô∏è BAD ‚Äì Hardcoded Staging URL\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê Call API&lt;br/&gt;‚ö†Ô∏è https://api.staging.example.com\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n```\n\n**FlowLint output:**\n```\n‚ö†Ô∏è R9 (should): Hardcoded env/config literal detected (staging URL).\nUse $env/$vars/credentials for base URLs.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Parameterized Base URL\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê Call API&lt;br/&gt;‚úÖ baseUrl from $env.API_BASE_URL\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n```\n\n**Why this passes:**\n- Base URL and env name come from expressions (`$env`, `$vars`)\n- No environment literals in the workflow JSON\n- Safe to promote between environments\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  config_literals:\n    enabled: true\n    patterns:\n      - \"(?i)staging\"\n      - \"(?i)production\"\n      - \"(?i)dev\\\\.\"\n```\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint warns about hardcoded staging URL.  \n2) Import `good-example.json`; FlowLint passes.  \n3) CI: include both in a PR; expect one `should` annotation on the bad example.\n\n---\n\n## Related Rules\n\n- **R4** Secrets: keep credentials/config out of literals  \n- **R1** Rate Limit/Retry: still apply to API nodes  \n- **R10** Naming: use clear names for env-specific nodes when unavoidable  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"config-literals-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"name\": \"Set Environment Vars\",\n      \"typeVersion\": 2,\n      \"parameters\": {\n        \"mode\": \"manual\",\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"envName\",\n              \"value\": \"={{ $env.ENV_NAME || 'dev' }}\"\n            }\n          ]\n        }\n      },\n      \"position\": [260, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Call API (Parametrized)\",\n      \"parameters\": {\n        \"url\": \"={{ $env.API_BASE_URL }}/v1/leads\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"environment\",\n              \"value\": \"={{ $json.envName }}\"\n            }\n          ]\n        }\n      },\n      \"position\": [520, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Environment Vars\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Environment Vars\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call API (Parametrized)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: Base URL and env name come from expressions ($env). No hardcoded environment literals; FlowLint R9 passes.\",\n    \"notes\": [\n      \"Portable across dev/stage/prod with different env vars\",\n      \"Safer deployment and review\",\n      \"Use credentials for auth tokens combined with env for base URLs\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"config-literals-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Call API (Staging Hardcoded)\",\n      \"parameters\": {\n        \"url\": \"https://api.staging.example.com/v1/leads\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"environment\",\n              \"value\": \"staging\"\n            }\n          ]\n        }\n      },\n      \"position\": [360, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call API (Staging Hardcoded)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ö†Ô∏è BAD: Base URL and env name are hardcoded for staging. FlowLint R9 warns.\",\n    \"notes\": [\n      \"Hardcoded environment values break portability\",\n      \"Use $env or credentials for base URLs and environment labels\"\n    ]\n  }\n}\n"
  },
  "R10": {
    "id": "R10",
    "readme": "# R10: Naming Convention (No Generic Node Names)\n\n## Overview\n\n**Rule:** R10 ‚Äì Naming Convention  \n**Severity:** `nit`  \n**Purpose:** Prevent generic node names (e.g., \"HTTP Request\", \"Set\", \"IF\"). Names should describe intent so reviewers understand the flow quickly.\n\n**FlowLint check (how R10 detects warnings):**\n- Compares node names to a denylist of generic titles (configurable)\n- Flags names like `HTTP Request`, `Set`, `If`, `Function`, `Webhook`\n- Encourages intent-driven names (‚ÄúCreate Lead API‚Äù, ‚ÄúFilter VIPs‚Äù)\n\n**Why it matters:** Clear names speed up reviews, debugging, and handoffs.\n\n---\n\n## üîß How to Fix R10 in n8n\n\n1. Rename nodes to describe **what** they do and **why**.  \n2. Include target system or condition in the name (e.g., ‚ÄúPush to CRM‚Äù, ‚ÄúFilter Paid Plans‚Äù).  \n3. Keep names short but specific.\n\n---\n\n## Example 1: ‚ö†Ô∏è BAD ‚Äì Generic Names\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"HTTP Request\"] --&gt; C[\"Set\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n    style C fill:#f8d7da\n```\n\n**FlowLint output:**\n```\n‚ö†Ô∏è R10 (nit): Generic node names detected (\"HTTP Request\", \"Set\").\nRename to reflect intent.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Intentful Names\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê Create Lead (CRM API)\"] --&gt; C[\"üß≠ Map lead fields\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n```\n\n**Why this passes:**\n- Names show system and purpose (Create Lead, Map lead fields)\n- Easier review/debug; no generic labels\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  naming_convention:\n    enabled: true\n    generic_names:\n      - \"http request\"\n      - \"set\"\n      - \"if\"\n      - \"function\"\n      - \"webhook\"\n```\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint warns about generic names.  \n2) Import `good-example.json`; FlowLint passes.  \n3) CI: include both in a PR; expect one `nit` annotation on the bad example.\n\n---\n\n## Related Rules\n\n- **R4** Secrets: descriptive names help auditors spot secret use  \n- **R7** Alert/Log: name alert nodes with channels/owners  \n- **R5** Dead Ends: terminal nodes should be named intentionally (End/Stop)  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"naming-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Create Lead (CRM API)\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"retry\": {\n            \"count\": 3\n          }\n        }\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"name\": \"Map lead fields\",\n      \"typeVersion\": 2,\n      \"parameters\": {\n        \"mode\": \"manual\",\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"status\",\n              \"value\": \"qualified\"\n            }\n          ]\n        }\n      },\n      \"position\": [520, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Lead (CRM API)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Lead (CRM API)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Map lead fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: Intentful node names show system and purpose. FlowLint R10 passes.\",\n    \"notes\": [\n      \"Names communicate intent and target system\",\n      \"Retry on API node pairs with clarity\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"naming-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"HTTP Request\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {}\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"name\": \"Set\",\n      \"typeVersion\": 2,\n      \"parameters\": {\n        \"mode\": \"manual\",\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"status\",\n              \"value\": \"new\"\n            }\n          ]\n        }\n      },\n      \"position\": [520, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ö†Ô∏è BAD: Generic node names ('HTTP Request', 'Set') reduce clarity. FlowLint R10 warns.\",\n    \"notes\": [\n      \"Rename nodes to show intent and target system\",\n      \"Helps reviewers and on-call debugging\"\n    ]\n  }\n}\n"
  },
  "R11": {
    "id": "R11",
    "readme": "# R11: Deprecated Nodes\n\n## Overview\n\n**Rule:** R11 ‚Äì Deprecated Nodes  \n**Severity:** `should`  \n**Purpose:** Warn when workflows use node types marked as deprecated by your team/vendor so they can be migrated before removal.\n\n**FlowLint check (how R11 detects warnings):**\n- Compares node `type` against a configured deprecation list\n- Flags matches with a warning and suggests replacement\n- List is maintained in `.flowlint.yml` (per team)\n\n**Why it matters:** Deprecated nodes lose support, miss security fixes, and may break on upgrades.\n\n---\n\n## üîß How to Fix R11 in n8n\n\n1. Identify the replacement node (e.g., new API version or official integration).  \n2. Recreate the node with the supported type and migrate credentials/fields.  \n3. Remove the deprecated node from the flow.\n\n---\n\n## Example 1: ‚ö†Ô∏è BAD ‚Äì Uses Deprecated HTTP (Legacy)\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê HTTP Request (Legacy)&lt;br/&gt;‚ö†Ô∏è deprecated type\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n```\n\n**FlowLint output:**\n```\n‚ö†Ô∏è R11 (should): Node type n8n-nodes-base.httpRequest (legacy) is deprecated. Replace with HTTP Request (v2) or vendor node.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Migrated to Supported Node\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê HTTP Request (v2)&lt;br/&gt;‚úÖ supported\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n```\n\n**Why this passes:**\n- Uses the non-deprecated node type\n- Ready for platform upgrades and security fixes\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  deprecated_nodes:\n    enabled: true\n    node_types:\n      - \"n8n-nodes-base.httpRequest\"      # legacy version\n      - \"n8n-nodes-base.googleSheets\"     # example; replace with official v2\n      - \"n8n-nodes-base.emailSend\"        # example; replace with SMTP/Email v2\n```\n\n&gt; Adjust the list to match your team's deprecation policy and vendor guidance.\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint warns about the deprecated node type.  \n2) Import `good-example.json`; FlowLint passes.  \n3) CI: include both in a PR; expect one `should` annotation on the bad example.\n\n---\n\n## Related Rules\n\n- **R4** Secrets: migrating may unlock better credential handling  \n- **R10** Naming: rename nodes to include target version during migration  \n- **R12** Unhandled Error Path: ensure the replacement still has error edges  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"deprecated-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequestV2\",\n      \"name\": \"HTTP Request (v2)\",\n      \"parameters\": {\n        \"url\": \"https://api.new.example.com/v2/data\",\n        \"method\": \"GET\",\n        \"options\": {\n          \"retry\": {\n            \"count\": 3\n          }\n        }\n      },\n      \"position\": [360, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request (v2)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: Uses supported node type (v2). FlowLint R11 passes.\",\n    \"notes\": [\n      \"Migrated away from deprecated node\",\n      \"Ready for platform upgrades and security fixes\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"deprecated-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"HTTP Request (Legacy)\",\n      \"parameters\": {\n        \"url\": \"https://api.legacy.example.com/v1/data\",\n        \"method\": \"GET\",\n        \"options\": {}\n      },\n      \"position\": [360, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request (Legacy)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ö†Ô∏è BAD: Uses node type on the deprecated list (e.g., legacy HTTP Request). FlowLint R11 warns to migrate.\",\n    \"notes\": [\n      \"Replace with supported node (HTTP Request v2 or vendor-specific node)\",\n      \"Deprecated nodes may lose security fixes and break on upgrades\"\n    ]\n  }\n}\n"
  },
  "R12": {
    "id": "R12",
    "readme": "# R12: Unhandled Error Path\n\n## Overview\n\n**Rule:** R12 ‚Äì Unhandled Error Path  \n**Severity:** `must`  \n**Purpose:** Ensure API/mutation nodes have an error branch so failures don‚Äôt disappear and downstream steps don‚Äôt run with bad state.\n\n**FlowLint check (how R12 detects violations):**\n- Finds API/mutation nodes (HTTP, DB writes, external services)\n- Checks for an **error** edge\n- If missing ‚Üí R12 violation (must-fix)\n\n**Why it matters:** Without an error path, retries or downstream actions can corrupt data and hide outages.\n\n---\n\n## üîß How to Fix R12 in n8n\n\n1. Add an **error output** from critical nodes to a handler.  \n2. Error handler should:\n   - Alert/log (Slack/Email)\n   - Optionally enqueue to DLQ\n   - Stop or mark run as failed\n3. Keep `continueOnFail` off (see R2) and pair with retry (R1) if appropriate.\n\n---\n\n## Example 1: ‚ùå BAD ‚Äì No Error Branch\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê Push to CRM&lt;br/&gt;‚ùå no error path\"]\n    B --&gt; C[\"üìù Save to Sheet\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n    style C fill:#fff3cd\n```\n\n**FlowLint output:**\n```\n‚ùå R12 (must): Node \"Push to CRM\" has no error branch. Add an error handler before downstream steps.\n```\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Error Path with Alert + DLQ\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê Push to CRM\"]\n    B --&gt;|success| C[\"üìù Save to Sheet\"]\n    B --&gt;|error| D[\"üîî Slack Alert\"]\n    D --&gt; E[\"üì¶ DLQ (Queue)\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n    style D fill:#d4edda\n    style E fill:#d4edda\n```\n\n**Why this passes:**\n- Error edge exists and surfaces failures\n- Payload saved to DLQ for replay\n- Downstream success path only runs on success\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  unhandled_error_path:\n    enabled: true\n```\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint flags missing error path.  \n2) Import `good-example.json`; FlowLint passes.  \n3) CI: include both in a PR; expect one must-fix annotation on the bad example.\n\n---\n\n## Related Rules\n\n- **R1** Rate Limit/Retry: retries before error branch  \n- **R2** Error Handling: keep `continueOnFail` disabled  \n- **R7** Alert/Log Enforcement: ensure error branch logs/alerts  \n",
    "good": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"unhandled-error-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Push to CRM\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"retry\": {\n            \"count\": 3,\n            \"strategy\": \"exponential\",\n            \"baseMs\": 500\n          }\n        }\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"name\": \"Save to Sheet\",\n      \"parameters\": {\n        \"spreadsheetId\": \"abc123xyz\",\n        \"range\": \"Sheet1!A1\",\n        \"options\": {}\n      },\n      \"position\": [540, 80]\n    },\n    {\n      \"id\": \"4\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"name\": \"Slack Alert\",\n      \"parameters\": {\n        \"channel\": \"#ops-alerts\",\n        \"text\": \":warning: CRM push failed for {{ $json.email || 'unknown' }}\",\n        \"additionalFields\": {}\n      },\n      \"position\": [540, 200]\n    },\n    {\n      \"id\": \"5\",\n      \"type\": \"n8n-nodes-base.queue\",\n      \"name\": \"DLQ (Queue)\",\n      \"parameters\": {\n        \"queue\": \"crm_failures\"\n      },\n      \"position\": [760, 200]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Push to CRM\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Push to CRM\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save to Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ],\n      \"error\": [\n        [\n          {\n            \"node\": \"Slack Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Slack Alert\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"DLQ (Queue)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚úÖ GOOD: Error branch exists with alert and DLQ; retries configured. FlowLint R12 passes.\",\n    \"notes\": [\n      \"Error path surfaces failures and preserves payload\",\n      \"Success path isolated; no continueOnFail\",\n      \"Pairs retry (R1) with observable handling\"\n    ]\n  }\n}\n",
    "bad": "{\n  \"nodes\": [\n    {\n      \"id\": \"1\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook\",\n      \"parameters\": {\n        \"path\": \"unhandled-error-demo\",\n        \"httpMethod\": \"POST\"\n      },\n      \"position\": [100, 100]\n    },\n    {\n      \"id\": \"2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Push to CRM\",\n      \"parameters\": {\n        \"url\": \"https://api.crm.example.com/leads\",\n        \"method\": \"POST\",\n        \"options\": {}\n      },\n      \"position\": [320, 100]\n    },\n    {\n      \"id\": \"3\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"name\": \"Save to Sheet\",\n      \"parameters\": {\n        \"spreadsheetId\": \"abc123xyz\",\n        \"range\": \"Sheet1!A1\",\n        \"options\": {}\n      },\n      \"position\": [540, 100]\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Push to CRM\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Push to CRM\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save to Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"‚ùå BAD: Critical API node has no error branch. FlowLint R12 flags unhandled error path.\",\n    \"notes\": [\n      \"Failures will not be surfaced; downstream steps still run\",\n      \"Add an error edge to alert/DLQ\"\n    ]\n  }\n}\n"
  },
  "R13": {
    "id": "R13",
    "readme": "# R13: Webhook Acknowledgment Pattern\n\n## Overview\n\n**Rule:** R13 ‚Äì Webhook Acknowledgment Pattern\n**Severity:** `must`\n**Purpose:** Ensure webhooks acknowledge receipt immediately (200/204) before performing heavy processing to prevent timeouts and duplicate events.\n\n**FlowLint check (how R13 detects violations):**\n- Finds webhook trigger nodes\n- Checks if heavy processing (HTTP requests, DB queries, AI/LLM calls) occurs before \"Respond to Webhook\" node\n- If heavy operations detected before response ‚Üí R13 violation (must-fix)\n\n**Why it matters:** Without immediate acknowledgment, webhooks can:\n- **Timeout** (&gt;30s typical limit) and trigger retries\n- **Process duplicates** from webhook provider retries\n- **Get disabled** by webhook providers due to reliability issues\n\n---\n\n## üîß How to Fix R13 in n8n\n\n1. Add **\"Respond to Webhook\"** node immediately after webhook trigger\n2. Set response to 200 OK or 204 No Content\n3. Perform **all heavy operations** after the response:\n   - HTTP API calls\n   - Database queries\n   - AI/LLM requests\n   - Long-running computations\n4. Optionally: enqueue work to background queue for async processing\n\n---\n\n## Example 1: ‚ùå BAD ‚Äì Heavy Processing Before Response\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"üåê HTTP Request&lt;br/&gt;‚ùå heavy before ack\"]\n    B --&gt; C[\"üóÑÔ∏è Database Write\"]\n    C --&gt; D[\"‚úÖ Respond (200)\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n    style C fill:#f8d7da\n    style D fill:#fff3cd\n```\n\n**FlowLint output:**\n```\n‚ùå R13 (must): Webhook \"Webhook\" performs heavy processing before acknowledgment (risk of timeout/duplicates)\n```\n\n**Problems:**\n- HTTP request (2-5s) + database write (1-2s) = 3-7s before response\n- If total time &gt;30s ‚Üí timeout ‚Üí duplicate event\n- Webhook provider may disable endpoint\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Immediate Acknowledgment\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook\"] --&gt; B[\"‚úÖ Respond (200)&lt;br/&gt;‚úì immediate ack\"]\n    B --&gt; C[\"üåê HTTP Request\"]\n    C --&gt; D[\"üóÑÔ∏è Database Write\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n    style D fill:#d4edda\n```\n\n**Why this passes:**\n- Webhook acknowledged in &lt;100ms\n- Heavy processing happens after response\n- No risk of timeout or duplicate events\n- Webhook provider sees reliable endpoint\n\n---\n\n## Heavy Node Types\n\nR13 considers these node types as \"heavy operations\":\n\n- **HTTP requests:** `n8n-nodes-base.httpRequest`\n- **Database queries:** `postgres`, `mysql`, `mongodb`\n- **AI/LLM calls:** `openAi`, `anthropic`, `huggingFace`\n- **Loops/batches:** Any loop or batch processing node\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  webhook_acknowledgment:\n    enabled: true\n    heavy_node_types:\n      - n8n-nodes-base.httpRequest\n      - n8n-nodes-base.postgres\n      - n8n-nodes-base.mysql\n      - n8n-nodes-base.mongodb\n      - n8n-nodes-base.openAi\n      - n8n-nodes-base.anthropic\n      - n8n-nodes-base.huggingFace\n```\n\n**Customization:**\n- Add/remove node types based on your infrastructure\n- Enable/disable per environment via config overrides\n\n---\n\n## Test This Rule\n\n1) Import `bad-example.json`; FlowLint flags missing immediate acknowledgment.\n2) Import `good-example.json`; FlowLint passes.\n3) CI: include both in a PR; expect one must-fix annotation on the bad example.\n\n---\n\n## Best Practices\n\n### Pattern 1: Immediate Response (Recommended)\n```\nWebhook ‚Üí Respond to Webhook (200) ‚Üí HTTP Request ‚Üí Database\n```\n\n### Pattern 2: Queue-Based (For Long Operations)\n```\nWebhook ‚Üí Respond to Webhook (202 Accepted) ‚Üí Enqueue Job ‚Üí [Background Worker]\n```\n\n### Pattern 3: Idempotency Check + Response\n```\nWebhook ‚Üí Check Idempotency Key ‚Üí Respond to Webhook (200) ‚Üí Process if New\n```\n\n---\n\n## Related Rules\n\n- **R1** Rate Limit/Retry: configure retries for downstream API calls\n- **R3** Idempotency: prevent duplicate processing with unique event IDs\n- **R12** Unhandled Error Path: ensure error handling after heavy operations\n\n---\n\n## Real-World Example\n\n**Stripe webhook handler:**\n```\n1. Webhook receives payment event\n2. Respond 200 OK immediately (&lt;100ms)\n3. Verify signature (fast)\n4. Process payment (database + email notification)\n5. If error: log to DLQ for retry\n```\n\nThis prevents Stripe from disabling your webhook due to slow responses.\n",
    "good": "{\n  \"name\": \"R13 Good Example - Webhook with Immediate Acknowledgment\",\n  \"nodes\": [\n    {\n      \"id\": \"webhook-trigger\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook Trigger\",\n      \"parameters\": {\n        \"path\": \"payment-webhook\",\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"onReceived\"\n      },\n      \"position\": [250, 300]\n    },\n    {\n      \"id\": \"respond-webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"name\": \"Respond to Webhook\",\n      \"parameters\": {\n        \"respondWith\": \"json\",\n        \"responseBody\": \"{ \\\"status\\\": \\\"accepted\\\" }\",\n        \"responseCode\": 200\n      },\n      \"position\": [450, 300]\n    },\n    {\n      \"id\": \"http-request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Fetch Customer Data\",\n      \"parameters\": {\n        \"url\": \"https://api.example.com/customers/{{ $json.customerId }}\",\n        \"method\": \"GET\",\n        \"authentication\": \"genericCredentialType\",\n        \"options\": {\n          \"retryOnFail\": true,\n          \"maxRetries\": 3\n        }\n      },\n      \"position\": [650, 300]\n    },\n    {\n      \"id\": \"database-write\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"name\": \"Save to Database\",\n      \"parameters\": {\n        \"operation\": \"insert\",\n        \"table\": \"payments\",\n        \"columns\": \"customer_id, amount, status\"\n      },\n      \"position\": [850, 300]\n    },\n    {\n      \"id\": \"error-handler\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"name\": \"Error Alert\",\n      \"parameters\": {\n        \"channel\": \"#alerts\",\n        \"text\": \"Payment webhook processing failed: {{ $json.error }}\"\n      },\n      \"position\": [850, 450]\n    }\n  ],\n  \"connections\": {\n    \"Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Respond to Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch Customer Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetch Customer Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save to Database\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ],\n      \"error\": [\n        [\n          {\n            \"node\": \"Error Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save to Database\": {\n      \"error\": [\n        [\n          {\n            \"node\": \"Error Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}\n",
    "bad": "{\n  \"name\": \"R13 Bad Example - Webhook with Heavy Processing Before Response\",\n  \"nodes\": [\n    {\n      \"id\": \"webhook-trigger\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Webhook Trigger\",\n      \"parameters\": {\n        \"path\": \"payment-webhook\",\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"onReceived\"\n      },\n      \"position\": [250, 300]\n    },\n    {\n      \"id\": \"http-request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Fetch Customer Data\",\n      \"parameters\": {\n        \"url\": \"https://api.example.com/customers/{{ $json.customerId }}\",\n        \"method\": \"GET\",\n        \"authentication\": \"genericCredentialType\",\n        \"options\": {\n          \"retryOnFail\": true,\n          \"maxRetries\": 3\n        }\n      },\n      \"position\": [450, 300]\n    },\n    {\n      \"id\": \"database-write\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"name\": \"Save to Database\",\n      \"parameters\": {\n        \"operation\": \"insert\",\n        \"table\": \"payments\",\n        \"columns\": \"customer_id, amount, status\"\n      },\n      \"position\": [650, 300]\n    },\n    {\n      \"id\": \"respond-webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"name\": \"Respond to Webhook\",\n      \"parameters\": {\n        \"respondWith\": \"json\",\n        \"responseBody\": \"{ \\\"status\\\": \\\"success\\\" }\"\n      },\n      \"position\": [850, 300]\n    }\n  ],\n  \"connections\": {\n    \"Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch Customer Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetch Customer Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save to Database\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save to Database\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}\n"
  },
  "R14": {
    "id": "R14",
    "readme": "# R14: HTTP Retry-After Header Compliance\n\n## Overview\n\n**Rule:** R14 ‚Äì HTTP Retry-After Header Compliance\n**Severity:** `should`\n**Purpose:** Detect HTTP nodes with retry logic that ignore `Retry-After` headers from 429 (Too Many Requests) and 503 (Service Unavailable) responses.\n\n**FlowLint check (how R14 detects violations):**\n- Finds HTTP request nodes with retry enabled (`retryOnFail: true`)\n- Checks if code/expressions reference `retry-after` or `retryAfter` headers\n- If retry enabled but no Retry-After logic ‚Üí R14 violation (should-fix)\n\n**Why it matters:** Ignoring Retry-After headers causes:\n- **Aggressive retry storms** hitting the same rate limit repeatedly\n- **Wasted API quota** on failed attempts\n- **Extended backoffs** or **IP blocking** from API providers\n- **Potential API key suspension** for abuse\n\n&gt; **Note (v0.4.1+):** Due to n8n UI limitations preventing complex expressions in the `Wait Between Tries` field, FlowLint v0.4.1+ **accepts static integer delays** as valid configuration to prevent blocking users who enable retries (R1). However, respecting `Retry-After` via a custom loop is still the recommended best practice for production robustness.\n\n---\n\n## üîß How to Fix R14 in n8n\n\n1. **Add expression to parse Retry-After header:**\n   ```javascript\n   const retryAfter = $json.headers['retry-after'];\n   const delay = retryAfter\n     ? (parseInt(retryAfter) || new Date(retryAfter) - Date.now())\n     : Math.min(1000 * Math.pow(2, $execution.retryCount), 60000);\n   ```\n\n2. **Use dynamic retry delay** based on server response\n\n3. **Add jitter** (randomization) to prevent thundering herd:\n   ```javascript\n   const jitter = Math.random() * 1000;\n   const delay = baseDelay + jitter;\n   ```\n\n4. **Respect provider-specific rate limits:**\n   - **Stripe:** 100 req/s, Retry-After in seconds\n   - **Shopify:** 2 req/s (REST), Retry-After in seconds\n   - **Notion:** 3 req/s, Retry-After in seconds\n   - **GitHub:** 5000 req/hr, X-RateLimit-Reset timestamp\n\n---\n\n## Example 1: ‚ùå BAD ‚Äì Ignoring Retry-After\n\nFile: `bad-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#fbbf24\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger\"] --&gt; B[\"üåê HTTP Request to Stripe API&lt;br/&gt;‚ùå retryOnFail: true&lt;br/&gt;‚ùå Fixed 1s delay&lt;br/&gt;‚ùå Ignores Retry-After\"]\n    B --&gt;|429 Too Many Requests| C[\"‚ùå Retry after 1s\"]\n    C --&gt;|429 again| D[\"‚ùå Retry after 1s\"]\n    D --&gt;|429 again| E[\"‚ùå API Ban\"]\n\n    style A fill:#fff3cd\n    style B fill:#f8d7da\n    style C fill:#f8d7da\n    style D fill:#f8d7da\n    style E fill:#f8d7da\n```\n\n**FlowLint output:**\n```\n‚ö†Ô∏è R14 (should): Node \"Call Stripe API\" has retry logic but ignores Retry-After headers (429/503 responses)\n```\n\n**Problems:**\n- Server says \"retry after 60 seconds\" via `Retry-After: 60`\n- n8n retries after 1 second (fixed delay)\n- Hits rate limit repeatedly\n- Gets IP blocked or API key suspended\n\n---\n\n## Example 2: ‚úÖ GOOD ‚Äì Respecting Retry-After\n\nFile: `good-example.json`\n\n```mermaid\n%%{init: { \"theme\": \"base\", \"themeVariables\": { \"primaryColor\": \"#38bdf8\", \"secondaryColor\": \"#22c55e\", \"tertiaryColor\": \"#e2e8f0\", \"primaryTextColor\": \"#0f172a\", \"lineColor\": \"#94a3b8\", \"edgeLabelBackground\": \"#e2e8f0\", \"background\": \"transparent\" } } }%%\ngraph LR\n    A[\"üîî Webhook Trigger\"] --&gt; B[\"üåê HTTP Request to Stripe API&lt;br/&gt;‚úì retryOnFail: true&lt;br/&gt;‚úì Dynamic delay&lt;br/&gt;‚úì Respects Retry-After\"]\n    B --&gt;|429 + Retry-After: 60| C[\"‚úì Wait 60s\"]\n    C --&gt;|Success| D[\"‚úÖ 200 OK\"]\n\n    style A fill:#d4edda\n    style B fill:#d4edda\n    style C fill:#d4edda\n    style D fill:#d4edda\n```\n\n**Why this passes:**\n- Parses `Retry-After` header from 429/503 responses\n- Waits exact duration specified by server\n- Fallback to exponential backoff if header missing\n- No wasted retries, no API bans\n\n---\n\n## Retry-After Header Format\n\nAPIs return Retry-After in two formats:\n\n### 1. Delay in seconds (most common)\n```\nHTTP/1.1 429 Too Many Requests\nRetry-After: 60\n```\n**Parse with:** `parseInt(headers['retry-after'])`\n\n### 2. HTTP date (absolute timestamp)\n```\nHTTP/1.1 503 Service Unavailable\nRetry-After: Wed, 21 Oct 2025 07:28:00 GMT\n```\n**Parse with:** `new Date(headers['retry-after']) - Date.now()`\n\n### Combined parsing logic:\n```javascript\nconst retryAfter = $json.headers['retry-after'];\nif (retryAfter) {\n  // Try parsing as seconds first\n  const seconds = parseInt(retryAfter);\n  if (!isNaN(seconds)) {\n    return seconds * 1000; // Convert to milliseconds\n  }\n  // Otherwise parse as HTTP date\n  const date = new Date(retryAfter);\n  return date - Date.now();\n}\n// Fallback: exponential backoff\nreturn Math.min(1000 * Math.pow(2, $execution.retryCount), 60000);\n```\n\n---\n\n## Configuration (`.flowlint.yml`)\n\n```yaml\nrules:\n  retry_after_compliance:\n    enabled: true\n    suggest_exponential_backoff: true  # Suggest fallback if header missing\n    suggest_jitter: true               # Add randomization to prevent thundering herd\n```\n\n**Disable for specific workflows:**\n```yaml\nrules:\n  retry_after_compliance:\n    enabled: false  # Disable R14 globally\n```\n\nOr use inline comments (future feature):\n```javascript\n// flowlint-disable retry_after_compliance\n```\n\n---\n\n## Test This Rule\n\n1. **Install FlowLint CLI:**\n   ```bash\n   npm install -g flowlint\n   ```\n\n2. **Scan bad example (should fail):**\n   ```bash\n   flowlint scan R14/bad-example.json\n   ```\n   **Expected output:**\n   ```\n   ‚ùå R14 (should): Node \"Call Stripe API\" has retry logic but ignores Retry-After headers\n   ```\n\n3. **Scan good example (should pass):**\n   ```bash\n   flowlint scan R14/good-example.json\n   ```\n   **Expected output:**\n   ```\n   ‚úÖ No findings\n   ```\n\n---\n\n## Best Practices\n\n### 1. Always Respect Server Guidance\n```javascript\n// ‚úÖ GOOD: Parse Retry-After\nconst retryAfter = $json.headers['retry-after'];\nconst delay = retryAfter ? parseInt(retryAfter) * 1000 : baseDelay;\n\n// ‚ùå BAD: Fixed delay\nconst delay = 1000; // Ignores server's Retry-After\n```\n\n### 2. Implement Exponential Backoff as Fallback\n```javascript\nconst retryAfter = $json.headers['retry-after'];\nif (retryAfter) {\n  return parseInt(retryAfter) * 1000; // Use server's guidance\n}\n// Fallback: exponential backoff with cap\nreturn Math.min(1000 * Math.pow(2, $execution.retryCount), 60000);\n```\n\n### 3. Add Jitter to Prevent Thundering Herd\n```javascript\nconst baseDelay = retryAfter || (1000 * Math.pow(2, $execution.retryCount));\nconst jitter = Math.random() * 1000; // 0-1000ms random\nreturn baseDelay + jitter;\n```\n\n### 4. Cap Maximum Delay\n```javascript\nconst delay = Math.min(parsedDelay, 300000); // Max 5 minutes\n```\n\n---\n\n## Provider-Specific Rate Limits\n\n### Stripe\n- **Limit:** 100 requests/second\n- **Header:** `Retry-After` (seconds)\n- **Documentation:** https://stripe.com/docs/rate-limits\n\n### Shopify\n- **Limit:** 2 req/s (REST API), 1000 points/s (GraphQL)\n- **Header:** `Retry-After` (seconds)\n- **Documentation:** https://shopify.dev/api/usage/rate-limits\n\n### Notion\n- **Limit:** 3 requests/second\n- **Header:** `Retry-After` (seconds)\n- **Documentation:** https://developers.notion.com/reference/request-limits\n\n### GitHub\n- **Limit:** 5000 req/hr (authenticated)\n- **Header:** `X-RateLimit-Reset` (Unix timestamp)\n- **Documentation:** https://docs.github.com/en/rest/overview/resources-in-the-rest-api#rate-limiting\n\n---\n\n## Related Rules\n\n- **R1: Rate Limit Retry** ‚Äì Ensures retry is enabled for API calls (R14 enhances this)\n- **R13: Webhook Acknowledgment** ‚Äì Prevents timeout and duplicates in webhooks\n- **R6: Long Running** ‚Äì Limits iteration counts and timeouts\n\n---\n\n## Real-World Example: Stripe Payment Processing\n\n**Scenario:** E-commerce workflow processing 1000 orders/hour during Black Friday\n\n**Without R14 compliance (ignoring Retry-After):**\n1. Hit rate limit (100 req/s)\n2. Get 429 with `Retry-After: 60`\n3. Retry after 1s (fixed delay)\n4. Hit rate limit again\n5. After 10 failed attempts ‚Üí API key suspended\n6. **Impact:** All payment processing stops\n\n**With R14 compliance (respecting Retry-After):**\n1. Hit rate limit (100 req/s)\n2. Get 429 with `Retry-After: 60`\n3. Wait exactly 60 seconds\n4. Successfully process next batch\n5. **Impact:** Smooth processing, no disruption\n\n---\n\n## Troubleshooting\n\n### \"Why am I still getting rate limited?\"\n\n1. **Check header case:**\n   ```javascript\n   // Headers are lowercase in n8n\n   $json.headers['retry-after']  // ‚úÖ Correct\n   $json.headers['Retry-After']  // ‚ùå Wrong (uppercase)\n   ```\n\n2. **Verify header exists:**\n   ```javascript\n   if ('retry-after' in $json.headers) {\n     console.log('Retry-After:', $json.headers['retry-after']);\n   }\n   ```\n\n3. **Test with curl:**\n   ```bash\n   curl -I https://api.stripe.com/v1/charges -H \"Authorization: Bearer sk_test_...\"\n   # Look for Retry-After header in 429 response\n   ```\n\n---\n\n## Summary\n\n| Aspect | Without R14 | With R14 |\n|--------|-------------|----------|\n| **Retry strategy** | Fixed delay | Server-guided delay |\n| **API bans risk** | High | Low |\n| **Wasted retries** | Many | Minimal |\n| **Production reliability** | Fragile | Robust |\n| **Provider relationship** | Poor (abuse) | Good (respectful) |\n\n**Bottom line:** Always respect `Retry-After` headers to build reliable, production-ready workflows.\n\n---\n\n**Last Updated:** 2025-12-08\n**FlowLint Version:** 0.5.1+\n**Related Issue:** [#136](https://github.com/Replikanti/flowlint-app/issues/136)\n",
    "good": "{\n  \"name\": \"R14 Good Example - HTTP Retry With Retry-After Handling\",\n  \"nodes\": [\n    {\n      \"id\": \"webhook-trigger\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Order Webhook\",\n      \"parameters\": {\n        \"path\": \"orders\",\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"onReceived\"\n      },\n      \"position\": [250, 300]\n    },\n    {\n      \"id\": \"http-stripe-charge\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Call Stripe API with Retry-After\",\n      \"parameters\": {\n        \"url\": \"https://api.stripe.com/v1/charges\",\n        \"method\": \"POST\",\n        \"authentication\": \"genericCredentialType\",\n        \"options\": {\n          \"retryOnFail\": true,\n          \"maxRetries\": 5,\n          \"retryDelay\": \"={{ (function() { const retryAfter = $json.headers['retry-after']; if (retryAfter) { const seconds = parseInt(retryAfter); if (!isNaN(seconds)) return seconds * 1000; const date = new Date(retryAfter); return date - Date.now(); } return Math.min(1000 * Math.pow(2, $execution.retryCount || 0), 60000); })() }}\"\n        },\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"amount\",\n              \"value\": \"={{ $json.amount }}\"\n            },\n            {\n              \"name\": \"currency\",\n              \"value\": \"usd\"\n            }\n          ]\n        }\n      },\n      \"position\": [450, 300]\n    },\n    {\n      \"id\": \"respond-webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"name\": \"Respond Success\",\n      \"parameters\": {\n        \"respondWith\": \"json\",\n        \"responseBody\": \"{ \\\"status\\\": \\\"charged\\\" }\"\n      },\n      \"position\": [650, 300]\n    }\n  ],\n  \"connections\": {\n    \"Order Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call Stripe API with Retry-After\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Call Stripe API with Retry-After\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond Success\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"GOOD: This workflow calls Stripe API and respects Retry-After headers. The retryDelay expression parses the header (either as seconds or HTTP date), falling back to exponential backoff if missing. This prevents API bans and ensures reliable production behavior.\"\n  }\n}\n",
    "bad": "{\n  \"name\": \"R14 Bad Example - HTTP Retry Without Retry-After Handling\",\n  \"nodes\": [\n    {\n      \"id\": \"webhook-trigger\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"name\": \"Order Webhook\",\n      \"parameters\": {\n        \"path\": \"orders\",\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"onReceived\"\n      },\n      \"position\": [250, 300]\n    },\n    {\n      \"id\": \"http-stripe-charge\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"name\": \"Call Stripe API\",\n      \"parameters\": {\n        \"url\": \"https://api.stripe.com/v1/charges\",\n        \"method\": \"POST\",\n        \"authentication\": \"genericCredentialType\",\n        \"options\": {\n          \"retryOnFail\": true,\n          \"maxRetries\": 5,\n          \"retryDelay\": 1000\n        },\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"amount\",\n              \"value\": \"={{ $json.amount }}\"\n            },\n            {\n              \"name\": \"currency\",\n              \"value\": \"usd\"\n            }\n          ]\n        }\n      },\n      \"position\": [450, 300]\n    },\n    {\n      \"id\": \"respond-webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"name\": \"Respond Success\",\n      \"parameters\": {\n        \"respondWith\": \"json\",\n        \"responseBody\": \"{ \\\"status\\\": \\\"charged\\\" }\"\n      },\n      \"position\": [650, 300]\n    }\n  ],\n  \"connections\": {\n    \"Order Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call Stripe API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Call Stripe API\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond Success\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"meta\": {\n    \"description\": \"BAD: This workflow calls Stripe API with retry enabled but uses fixed 1-second delay, completely ignoring Retry-After headers from 429 responses. This will cause aggressive retry storms and potential API key suspension.\"\n  }\n}\n"
  }
}</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-12-25T02:46:37.434Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
    